---
allowed-tools: WebSearch, AskUserQuestion, Read, Grep, Glob, Bash(pbcopy:*), Bash(echo:*)
description: 자연어 요구 사항을 LLM이 더 잘 이해할 수 있는 명확한 프롬프트로 개선합니다. 사용법 - /prompt-refiner [요구사항]
argument-hint: [요구사항]
---

# 프롬프트 리파이너 (Prompt Refiner)

**사용자 입력**: $ARGUMENTS

## 목적

사용자가 제공한 자연어 요구 사항을 분석하여, LLM 모델이 의미론적으로 명확하고 순서적으로 이해하기 쉬운 형태로 개선합니다.

## 워크플로우

### Step 1: 요구 사항 분석

사용자가 제공한 요구 사항 `$ARGUMENTS`를 분석합니다:

1. **핵심 의도 파악**: 사용자가 궁극적으로 원하는 것이 무엇인지 파악
2. **모호한 부분 식별**: 불명확하거나 여러 해석이 가능한 부분 표시
3. **누락된 정보 탐지**: 작업 수행에 필요하지만 언급되지 않은 정보 파악
4. **맥락 이해**: 코드베이스나 웹 검색을 통해 추가 맥락 수집

### Step 2: 추가 정보 수집

필요한 경우:

- **코드베이스 검색**: Glob, Grep, Read 도구를 사용하여 관련 코드/문서 검색
- **웹 검색**: WebSearch 도구를 사용하여 기술적 맥락이나 모범 사례 검색

### Step 3: 불명확한 부분 문의

AskUserQuestion 도구를 사용하여 모호한 부분에 대해 사용자에게 명확히 문의합니다:

```
AskUserQuestion(questions=[
  {
    "question": "[구체적인 질문]",
    "header": "명확화",
    "options": [
      {"label": "옵션 A", "description": "설명"},
      {"label": "옵션 B", "description": "설명"}
    ],
    "multiSelect": false
  }
])
```

### Step 4: 개선된 프롬프트 생성

수집된 정보를 바탕으로 다음 구조로 프롬프트를 개선합니다:

```
## 개선된 프롬프트

### 목표
[명확한 목표 1문장]

### 맥락
- [관련 배경 정보]
- [기술적 제약사항]

### 세부 요구사항
1. [구체적 요구사항 1]
2. [구체적 요구사항 2]
...

### 기대 결과물
[구체적인 결과물 형태 명시]

### 제약조건/고려사항
- [제약조건 1]
- [제약조건 2]
```

### Step 5: 사용자 확인 (반복)

개선된 프롬프트를 사용자에게 제시하고 AskUserQuestion으로 확인합니다:

```
AskUserQuestion(questions=[
  {
    "question": "위의 개선된 프롬프트가 의도하신 내용과 일치하나요?",
    "header": "확인",
    "options": [
      {"label": "예", "description": "프롬프트가 정확합니다. 클립보드에 복사해 주세요."},
      {"label": "아니오", "description": "수정이 필요합니다. 피드백을 제공하겠습니다."}
    ],
    "multiSelect": false
  }
])
```

**중요**: 사용자가 "예"를 선택할 때까지 Step 3-5를 반복합니다. "아니오"를 선택한 경우:

1. AskUserQuestion으로 구체적인 수정 사항 문의
2. 피드백을 반영하여 프롬프트 재개선
3. 다시 확인 요청

### Step 6: 클립보드 복사 (최종)

사용자가 "예"를 선택하면, 최종 개선된 프롬프트를 클립보드에 복사합니다:

```bash
echo "개선된 프롬프트 내용" | pbcopy
```

복사 완료 후 사용자에게 알립니다:
"✅ 개선된 프롬프트가 클립보드에 복사되었습니다!"

## 프롬프트 개선 원칙

1. **명확성**: 모호한 표현을 구체적인 표현으로 변환
2. **구조화**: 논리적 순서로 정보 배치
3. **완전성**: 누락된 중요 정보 추가
4. **간결성**: 불필요한 중복 제거
5. **실행 가능성**: LLM이 즉시 수행 가능한 형태로 작성

## 예시

**입력**: "로그인 기능 만들어줘"

**개선된 프롬프트**:

```
## 목표
사용자 로그인 기능을 구현합니다.

## 맥락
- 프레임워크: [확인 필요]
- 기존 인증 시스템: [확인 필요]

## 세부 요구사항
1. 이메일/비밀번호 기반 로그인 폼 구현
2. 입력 유효성 검증 추가
3. 로그인 API 엔드포인트 연동
4. 로그인 실패 시 에러 메시지 표시
5. 로그인 성공 시 대시보드로 리다이렉트

## 기대 결과물
- 로그인 컴포넌트 파일
- 필요한 유틸리티/훅 함수

## 제약조건
- 기존 UI 스타일 가이드 준수
- 보안 모범 사례 적용 (비밀번호 노출 방지 등)
```
